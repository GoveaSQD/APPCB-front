<div class="flex align-items-center justify-content-center min-h-screen bg-primary-50 p-3">
  <div class="surface-card p-6 shadow-4 border-round-xl w-full lg:w-6">
    <!-- Header -->
    <div class="text-center mb-5">
      <div class="bg-primary inline-flex align-items-center justify-content-center w-4rem h-4rem border-circle shadow-3 mb-3">
        <i class="pi pi-user-plus text-3xl text-white"></i>
      </div>
      <h2 class="text-2xl font-bold text-900 mb-2">Crear cuenta</h2>
      <p class="text-500">Completa tus datos para registrarte</p>
    </div>

    <p-toast position="top-right"></p-toast>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="flex flex-column gap-4">
      <!-- Nombre completo -->
      <span class="p-float-label">
        <input 
          id="nombre" 
          type="text" 
          pInputText 
          formControlName="nombre"
          class="w-full" 
          [class.ng-invalid]="submitted && f['nombre'].errors">
        <label for="nombre">Nombre completo</label>
      </span>
      @if (submitted && f['nombre'].errors) {
        <small class="p-error">
          {{ f['nombre'].errors['required'] ? 'El nombre es requerido' : 'Mínimo 3 caracteres' }}
        </small>
      }

      <!-- Email y teléfono-->
      <div class="grid">
        <div class="col-12 md:col-6">
          <span class="p-float-label w-full">
            <input 
              id="email" 
              type="email" 
              pInputText 
              formControlName="email"
              class="w-full" 
              [class.ng-invalid]="submitted && f['email'].errors">
            <label for="email">Correo electrónico</label>
          </span>
          @if (submitted && f['email'].errors) {
            <small class="p-error block mt-1">
              {{ f['email'].errors['required'] ? 'El correo es requerido' : 'Correo inválido' }}
            </small>
          }
        </div>

        <div class="col-12 md:col-6">
          <span class="p-float-label w-full">
            <input 
              id="telefono" 
              type="tel" 
              pInputText 
              formControlName="telefono"
              class="w-full" 
              [class.ng-invalid]="submitted && f['telefono'].errors">
            <label for="telefono">Teléfono (opcional)</label>
          </span>
          @if (submitted && f['telefono'].errors) {
            <small class="p-error block mt-1">
              Ingresa 10 dígitos válidos
            </small>
          }
        </div>
      </div>

      <!-- Contraseña y confirmación -->
      <div class="grid">
        <div class="col-12 md:col-6">
          <span class="p-float-label w-full">
            <p-password 
              id="password"
              formControlName="password"
              [feedback]="true"
              [toggleMask]="true"
              inputStyleClass="w-full"
              styleClass="w-full"
              [class.ng-invalid]="submitted && f['password'].errors">
            </p-password>
            <label for="password">Contraseña</label>
          </span>
          @if (submitted && f['password'].errors) {
            <small class="p-error block mt-1">
              {{ f['password'].errors['required'] ? 'La contraseña es requerida' : 'Mínimo 6 caracteres' }}
            </small>
          }
        </div>

        <div class="col-12 md:col-6">
          <span class="p-float-label w-full">
            <p-password 
              id="confirmPassword"
              formControlName="confirmPassword"
              [feedback]="false"
              [toggleMask]="true"
              inputStyleClass="w-full"
              styleClass="w-full"
              [class.ng-invalid]="submitted && (f['confirmPassword'].errors || registerForm.errors?.['passwordMismatch'])">
            </p-password>
            <label for="confirmPassword">Confirmar contraseña</label>
          </span>
          @if (submitted && registerForm.errors?.['passwordMismatch']) {
            <small class="p-error block mt-1">
              Las contraseñas no coinciden
            </small>
          }
        </div>
      </div>

      <!-- Rol -->
      <div class="flex align-items-center gap-4">
        <label class="text-sm font-medium text-600 w-4rem">Rol:</label>
        <div class="flex gap-3">
          <div class="flex align-items-center gap-2">
            <p-radioButton 
              name="rol" 
              value="usuario" 
              formControlName="rol" 
              inputId="rol_usuario">
            </p-radioButton>
            <label for="rol_usuario" class="text-sm">Usuario</label>
          </div>
          <div class="flex align-items-center gap-2">
            <p-radioButton 
              name="rol" 
              value="admin" 
              formControlName="rol" 
              inputId="rol_admin">
            </p-radioButton>
            <label for="rol_admin" class="text-sm">Administrador</label>
          </div>
        </div>
      </div>

      <!-- Términos y condiciones -->
      <div class="flex align-items-center gap-2">
        <p-checkbox 
          formControlName="acceptTerms" 
          [binary]="true" 
          inputId="acceptTerms">
        </p-checkbox>
        <label for="acceptTerms" class="text-sm text-600">
          Acepto los <a class="text-primary font-medium cursor-pointer no-underline">términos y condiciones</a>
        </label>
      </div>
      @if (submitted && f['acceptTerms'].errors) {
        <small class="p-error -mt-2">
          Debes aceptar los términos
        </small>
      }

      <!-- Botones -->
      <p-button 
        type="submit" 
        label="Registrarse" 
        icon="pi pi-check"
        [loading]="loading"
        styleClass="w-full p-3 text-lg font-medium"
        [raised]="true">
      </p-button>

      <div class="flex align-items-center gap-2 text-sm text-500">
        <span class="flex-1 border-top-1 border-300"></span>
        <span>¿Ya tienes cuenta?</span>
        <span class="flex-1 border-top-1 border-300"></span>
      </div>

      <p-button 
        type="button" 
        label="Iniciar sesión" 
        icon="pi pi-sign-in"
        styleClass="p-button-outlined w-full p-3 text-lg font-medium"
        routerLink="/auth/login">
      </p-button>
    </form>
  </div>
</div>